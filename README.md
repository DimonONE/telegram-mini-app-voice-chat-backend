# Telegram Mini App - Voice & Video Chat

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ Telegram Mini App —Å –≥–æ–ª–æ—Å–æ–≤—ã–º –∏ –≤–∏–¥–µ–æ—á–∞—Ç–æ–º, –∫–æ—Ç–æ—Ä–æ–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ —Å–ª–∞–±–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –ó–∞–ø—É—Å–∫ –≤–Ω—É—Ç—Ä–∏ Telegram —á–µ—Ä–µ–∑ WebApp API
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–º–µ–Ω–∏ –∏ –∞–≤–∞—Ç–∞—Ä–∞)
- ‚úÖ –ì–æ–ª–æ—Å–æ–≤–æ–π –∏ –≤–∏–¥–µ–æ—á–∞—Ç —á–µ—Ä–µ–∑ WebRTC
- ‚úÖ –ö–æ–º–Ω–∞—Ç—ã –ø–æ ID (–Ω–∞–ø—Ä–∏–º–µ—Ä, "room123")
- ‚úÖ –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å –∞–≤–∞—Ç–∞—Ä–∞–º–∏ Telegram
- ‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –≥–æ–≤–æ—Ä—è—â–∏—Ö (–∞–Ω–∏–º–∞—Ü–∏—è –∏ –ø–æ–¥—Å–≤–µ—Ç–∫–∞)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º –∏ –∫–∞–º–µ—Ä–æ–π
- ‚úÖ –°—Ç–∞—Ç—É—Å "–í —ç—Ñ–∏—Ä–µ" –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø—Ä–∏ —Å–ª–∞–±–æ–º –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ (STUN/TURN)
- ‚úÖ UI –≤ —Å—Ç–∏–ª–µ Telegram (—Å–≤–µ—Ç–ª–∞—è/—Ç—ë–º–Ω–∞—è —Ç–µ–º–∞)

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11+
- Node.js 20+

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python:**
```bash
pip install -r requirements.txt
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Node.js:**
```bash
npm install
```

## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫

### –ó–∞–ø—É—Å–∫ Backend (Signaling Server)

```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

Backend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:8000`

### –ó–∞–ø—É—Å–∫ Frontend

```bash
npm run dev
```

Frontend –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ `http://localhost:5000`

## üì± –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Bot –¥–ª—è Mini App

### 1. –°–æ–∑–¥–∞–π—Ç–µ –±–æ—Ç–∞

–û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞:

```
/newbot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Mini App

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ WebApp URL:

```
/newapp
```

–í—ã–±–µ—Ä–∏—Ç–µ —Å–≤–æ–µ–≥–æ –±–æ—Ç–∞ –∏ –≤–≤–µ–¥–∏—Ç–µ:
- **Title**: Voice Chat
- **Description**: –ì–æ–ª–æ—Å–æ–≤–æ–π –∏ –≤–∏–¥–µ–æ—á–∞—Ç –≤ Telegram
- **Photo**: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∫–æ–Ω–∫—É (512x512 px)
- **Web App URL**: `https://your-domain.com` (–∏–ª–∏ Replit URL –ø–æ—Å–ª–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)

### 3. –ü—Ä–∏–º–µ—Ä –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ Bot API

–í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —á–µ—Ä–µ–∑ Bot API:

```bash
curl -X POST "https://api.telegram.org/bot<YOUR_BOT_TOKEN>/setChatMenuButton" \
  -H "Content-Type: application/json" \
  -d '{
    "menu_button": {
      "type": "web_app",
      "text": "Open Voice Chat",
      "web_app": {
        "url": "https://your-domain.com"
      }
    }
  }'
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è TURN —Å–µ—Ä–≤–µ—Ä–∞

‚ö†Ô∏è **–í–ê–ñ–ù–û**: –î–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å TURN —Å–µ—Ä–≤–µ—Ä!

–ë–µ–∑ TURN —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ STUN, –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Å–µ—Ç—è—Ö.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env`:
```bash
cp .env.example .env
```

2. –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ TURN —Å–µ—Ä–≤–µ—Ä–∞:

- **[Metered OpenRelay](https://www.metered.ca/tools/openrelay/)** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π TURN —Å–µ—Ä–≤–µ—Ä
- **[Twilio STUN/TURN](https://www.twilio.com/stun-turn)** - 10 –ì–ë –±–µ—Å–ø–ª–∞—Ç–Ω–æ
- **[Xirsys](https://xirsys.com/)** - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

3. –û–±–Ω–æ–≤–∏—Ç–µ `.env` —Å –≤–∞—à–∏–º–∏ —É—á—ë—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:

```bash
TURN_URL=turn:global.relay.metered.ca:80
TURN_USERNAME=–≤–∞—à-username
TURN_PASSWORD=–≤–∞—à-password
```

4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend:
```bash
uvicorn main:app --host 0.0.0.0 --port 8000
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç ICE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å backend –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç TURN —Å–µ—Ä–≤–µ—Ä, –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã —É—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ STUN-only –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ TURN

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8000/api/ice-config` —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å —Ç–µ–∫—É—â—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é ICE —Å–µ—Ä–≤–µ—Ä–æ–≤.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py                      # FastAPI signaling server
‚îú‚îÄ‚îÄ requirements.txt             # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ package.json                 # Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ vite.config.js              # Vite –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ tailwind.config.js          # TailwindCSS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ index.html                  # HTML entry point
‚îî‚îÄ‚îÄ src/
    ‚îú‚îÄ‚îÄ main.jsx                # React entry point
    ‚îú‚îÄ‚îÄ App.jsx                 # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
    ‚îú‚îÄ‚îÄ index.css               # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏
    ‚îú‚îÄ‚îÄ components/
    ‚îÇ   ‚îú‚îÄ‚îÄ RoomJoin.jsx        # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—Ö–æ–¥–∞ –≤ –∫–æ–º–Ω–∞—Ç—É
    ‚îÇ   ‚îú‚îÄ‚îÄ VoiceChat.jsx       # –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∞—Ç–∞
    ‚îÇ   ‚îú‚îÄ‚îÄ ParticipantList.jsx # –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ VideoGrid.jsx       # –°–µ—Ç–∫–∞ –≤–∏–¥–µ–æ
    ‚îÇ   ‚îî‚îÄ‚îÄ ControlPanel.jsx    # –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
    ‚îî‚îÄ‚îÄ hooks/
        ‚îî‚îÄ‚îÄ useWebRTC.js        # WebRTC –ª–æ–≥–∏–∫–∞
```

## üåê –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –Ω–∞ Replit:

1. Frontend –∏ Backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π Replit URL –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Telegram Bot
3. HTTPS –≤–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–ª—è Telegram Mini Apps

## üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

1. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram
2. –í–≤–µ–¥–∏—Ç–µ ID –∫–æ–º–Ω–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, "room123")
3. –†–∞–∑—Ä–µ—à–∏—Ç–µ –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É
4. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å ID –∫–æ–º–Ω–∞—Ç—ã —Å –¥—Ä—É–∑—å—è–º–∏
5. –û–±—â–∞–π—Ç–µ—Å—å –≥–æ–ª–æ—Å–æ–º –∏–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ –∫–∞–º–µ—Ä—É –¥–ª—è –≤–∏–¥–µ–æ!

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã (DTLS-SRTP)
- Signaling —á–µ—Ä–µ–∑ WebSocket
- –ù–∏–∫–∞–∫–∏–µ –º–µ–¥–∏–∞ –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–µ—Ä (peer-to-peer)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ HTTPS –¥–ª—è Telegram Mini Apps

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø –∫ –º–∏–∫—Ä–æ—Ñ–æ–Ω—É/–∫–∞–º–µ—Ä–µ
2. HTTPS –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è WebRTC)
3. Backend —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
4. WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ

---

–°–æ–∑–¥–∞–Ω–æ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ Telegram —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–ª–∞–±–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ üöÄ
